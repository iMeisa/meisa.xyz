{{template "base" .}}

{{define "title"}}SAP Randomizer{{end}}

{{define "content"}}
    <div class="container" id="sap">
    </div>
{{end}}

{{define "css"}}
    <style>
        h2 {
            text-align: left;
        }
        .item-img {
            width: 125px;
        }

        .food {
            margin-bottom: 5em;
        }
    </style>
{{end}}

{{define "js"}}
    <script>
        activateNav('nav-sap')
        const sap_data = JSON.parse({{index .StringMap "sap"}})
        console.log(sap_data)

        const sap_div = document.getElementById('sap')
        for (const tier in sap_data) {
            sap_div.innerHTML += `
                    <h2>Tier ${tier} Pets</h2>
                    <div class="row pets" id="tier-${tier}-pets"></div>
                    <h2>Tier ${tier} Food</h2>
                    <div class="row food" id="tier-${tier}-food"></div>
                `
            fillItems(tier, false)
        }

        function fillItems(tier, random) {
            const pets_div = document.getElementById(`tier-${tier}-pets`)
            const food_div = document.getElementById(`tier-${tier}-food`)

            pets_div.innerHTML = ''
            food_div.innerHTML = ''

            const tier_pets = sap_data[tier]['pets']
            const tier_food = sap_data[tier]['food']
            for (const i in tier_pets) {
                const pet_name = tier_pets[i]
                pets_div.innerHTML += `<img class="item-img" loading="lazy" src="/static/images/SAP/${pet_name}.PNG" alt="${pet_name}">`
            }
            for (const i in tier_food) {
                const food_name = tier_food[i]
                food_div.innerHTML += `<img class="item-img" loading="lazy" src="/static/images/SAP/${food_name}.PNG" alt="${food_name}">`
            }
        }
    </script>
{{end}}